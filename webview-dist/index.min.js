/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};function n(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var e=function(){return(e=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function i(t,n,e,i){return new(e||(e=Promise))((function(o,r){function a(t){try{s(i.next(t))}catch(t){r(t)}}function u(t){try{s(i.throw(t))}catch(t){r(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,u)}s((i=i.apply(t,n||[])).next())}))}function o(t,n){var e,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(r){return function(u){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=n.call(t,a)}catch(t){r=[6,t],i=0}finally{e=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,u])}}}function r(t,n){void 0===n&&(n=!1);var e=window.crypto.getRandomValues(new Uint32Array(1))[0],i="_".concat(e);return Object.defineProperty(window,i,{value:function(e){return n&&Reflect.deleteProperty(window,i),null==t?void 0:t(e)},writable:!1,configurable:!0}),e}function a(t,n){return void 0===n&&(n={}),i(this,void 0,void 0,(function(){return o(this,(function(i){return[2,new Promise((function(i,o){var a=r((function(t){i(t),Reflect.deleteProperty(window,u)}),!0),u=r((function(t){o(t),Reflect.deleteProperty(window,a)}),!0);window.__TAURI_IPC__(e({cmd:t,callback:a,error:u},n))}))]}))}))}function u(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,a("tauri",t)]}))}))}function s(t,n){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2,u({__tauriModule:"Event",message:{cmd:"unlisten",event:t,eventId:n}})]}))}))}function c(t,n,e){return i(this,void 0,void 0,(function(){return o(this,(function(i){switch(i.label){case 0:return[4,u({__tauriModule:"Event",message:{cmd:"emit",event:t,windowLabel:n,payload:"string"==typeof e?e:JSON.stringify(e)}})];case 1:return i.sent(),[2]}}))}))}function l(t,n,e){return i(this,void 0,void 0,(function(){var a=this;return o(this,(function(c){return[2,u({__tauriModule:"Event",message:{cmd:"listen",event:t,windowLabel:n,handler:r(e)}}).then((function(n){return function(){return i(a,void 0,void 0,(function(){return o(this,(function(e){return[2,s(t,n)]}))}))}}))]}))}))}function d(t,n,e){return i(this,void 0,void 0,(function(){return o(this,(function(i){return[2,l(t,n,(function(n){e(n),s(t,n.id).catch((function(){}))}))]}))}))}Object.freeze({__proto__:null,transformCallback:r,invoke:a,convertFileSrc:function(t,n){return void 0===n&&(n="asset"),navigator.userAgent.includes("Windows")?"https://".concat(n,".localhost/").concat(t):"".concat(n,"://").concat(t)}});var h,f=function(t,n){this.type="Logical",this.width=t,this.height=n},p=function(){function t(t,n){this.type="Physical",this.width=t,this.height=n}return t.prototype.toLogical=function(t){return new f(this.width/t,this.height/t)},t}(),m=function(t,n){this.type="Logical",this.x=t,this.y=n},y=function(){function t(t,n){this.type="Physical",this.x=t,this.y=n}return t.prototype.toLogical=function(t){return new m(this.x/t,this.y/t)},t}();function w(){return window.__TAURI_METADATA__.__windows.map((function(t){return new M(t.label,{skip:!0})}))}!function(t){t[t.Critical=1]="Critical",t[t.Informational=2]="Informational"}(h||(h={}));var v,g=["tauri://created","tauri://error"],_=function(){function t(t){this.label=t,this.listeners=Object.create(null)}return t.prototype.listen=function(t,n){return i(this,void 0,void 0,(function(){var e=this;return o(this,(function(i){return this._handleTauriEvent(t,n)?[2,Promise.resolve((function(){var i=e.listeners[t];i.splice(i.indexOf(n),1)}))]:[2,l(t,this.label,n)]}))}))},t.prototype.once=function(t,n){return i(this,void 0,void 0,(function(){var e=this;return o(this,(function(i){return this._handleTauriEvent(t,n)?[2,Promise.resolve((function(){var i=e.listeners[t];i.splice(i.indexOf(n),1)}))]:[2,d(t,this.label,n)]}))}))},t.prototype.emit=function(t,n){return i(this,void 0,void 0,(function(){var e,i;return o(this,(function(o){if(g.includes(t)){for(e=0,i=this.listeners[t]||[];e<i.length;e++)(0,i[e])({event:t,id:-1,windowLabel:this.label,payload:n});return[2,Promise.resolve()]}return[2,c(t,this.label,n)]}))}))},t.prototype._handleTauriEvent=function(t,n){return!!g.includes(t)&&(t in this.listeners?this.listeners[t].push(n):this.listeners[t]=[n],!0)},t}(),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.scaleFactor=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})]}))}))},e.prototype.innerPosition=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then((function(t){var n=t.x,e=t.y;return new y(n,e)}))]}))}))},e.prototype.outerPosition=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then((function(t){var n=t.x,e=t.y;return new y(n,e)}))]}))}))},e.prototype.innerSize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then((function(t){var n=t.width,e=t.height;return new p(n,e)}))]}))}))},e.prototype.outerSize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then((function(t){var n=t.width,e=t.height;return new p(n,e)}))]}))}))},e.prototype.isFullscreen=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})]}))}))},e.prototype.isMaximized=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})]}))}))},e.prototype.isDecorated=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})]}))}))},e.prototype.isResizable=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})]}))}))},e.prototype.isVisible=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})]}))}))},e.prototype.center=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})]}))}))},e.prototype.requestUserAttention=function(t){return i(this,void 0,void 0,(function(){var n;return o(this,(function(e){return n=null,t&&(n=t===h.Critical?{type:"Critical"}:{type:"Informational"}),[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:n}}}})]}))}))},e.prototype.setResizable=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:t}}}})]}))}))},e.prototype.setTitle=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:t}}}})]}))}))},e.prototype.maximize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})]}))}))},e.prototype.unmaximize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})]}))}))},e.prototype.toggleMaximize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})]}))}))},e.prototype.minimize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})]}))}))},e.prototype.unminimize=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})]}))}))},e.prototype.show=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})]}))}))},e.prototype.hide=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})]}))}))},e.prototype.close=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})]}))}))},e.prototype.setDecorations=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:t}}}})]}))}))},e.prototype.setAlwaysOnTop=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:t}}}})]}))}))},e.prototype.setSize=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){if(!t||"Logical"!==t.type&&"Physical"!==t.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:t.type,data:{width:t.width,height:t.height}}}}}})]}))}))},e.prototype.setMinSize=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){if(t&&"Logical"!==t.type&&"Physical"!==t.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:t?{type:t.type,data:{width:t.width,height:t.height}}:null}}}})]}))}))},e.prototype.setMaxSize=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){if(t&&"Logical"!==t.type&&"Physical"!==t.type)throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:t?{type:t.type,data:{width:t.width,height:t.height}}:null}}}})]}))}))},e.prototype.setPosition=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){if(!t||"Logical"!==t.type&&"Physical"!==t.type)throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:t.type,data:{x:t.x,y:t.y}}}}}})]}))}))},e.prototype.setFullscreen=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:t}}}})]}))}))},e.prototype.setFocus=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})]}))}))},e.prototype.setIcon=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:"string"==typeof t?t:Array.from(t)}}}}})]}))}))},e.prototype.setSkipTaskbar=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:t}}}})]}))}))},e.prototype.startDragging=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})]}))}))},e}(_),M=function(t){function r(n,r){void 0===r&&(r={});var a=t.call(this,n)||this;return(null==r?void 0:r.skip)||u({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:e({label:n},r)}}}).then((function(){return i(a,void 0,void 0,(function(){return o(this,(function(t){return[2,this.emit("tauri://created")]}))}))})).catch((function(t){return i(a,void 0,void 0,(function(){return o(this,(function(n){return[2,this.emit("tauri://error",t)]}))}))})),a}return n(r,t),r.getByLabel=function(t){return w().some((function(n){return n.label===t}))?new r(t,{skip:!0}):null},r}(b);"__TAURI_METADATA__"in window?v=new M(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn('Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.\nNote that this is not an issue if running this frontend on a browser instead of a Tauri window.'),v=new M("main",{skip:!0})),Object.freeze({__proto__:null,WebviewWindow:M,WebviewWindowHandle:_,WindowManager:b,getCurrent:function(){return new M(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0})},getAll:w,get appWindow(){return v},LogicalSize:f,PhysicalSize:p,LogicalPosition:m,PhysicalPosition:y,get UserAttentionType(){return h},currentMonitor:function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}})]}))}))},primaryMonitor:function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}})]}))}))},availableMonitors:function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,u({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}})]}))}))}});const W=v;async function z(t){await a("plugin:fs-watch|unwatch",{id:t})}async function P(t,n,e){const i={recursive:!1,delayMs:2e3,...n};let o;o="string"==typeof t?[t]:t;const r=window.crypto.getRandomValues(new Uint32Array(1))[0];await a("plugin:fs-watch|watch",{id:r,paths:o,options:i});const u=await W.listen(`watcher://debounced-event/${r}`,(t=>{e(t.payload)}));return async()=>{await z(r),await u()}}async function A(t,n,e){const i={recursive:!1,...n,delayMs:null};let o;o="string"==typeof t?[t]:t;const r=window.crypto.getRandomValues(new Uint32Array(1))[0];await a("plugin:fs-watch|watch",{id:r,paths:o,options:i});const u=await W.listen(`watcher://raw-event/${r}`,(t=>{e(t.payload)}));return async()=>{await z(r),await u()}}export{P as watch,A as watchImmediate};
